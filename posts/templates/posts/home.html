{% extends "base.html" %}
{% load static %}
{% block css %}
   <link rel="stylesheet" href="{% static "posts/home.css" %}">
{% endblock css %}
{% block body %}
   <!-- Теги для фильтрации -->
   <div class="tags-container">
                <div class="tag active">All</div>
                <div class="tag">Nature</div>
                <div class="tag">Games</div>
                <div class="tag">Design</div>
                <div class="tag">Programming</div>
                <div class="tag">News</div>
                <div class="tag">Education</div>
                <div class="tag">Creativity</div>
                <div class="tag">Entertainment</div>
                <div class="tag">Technology</div>
   </div>
   
   <!-- Популярные посты -->
   <h2 class="section-title">Popular posts</h2>
   <div class="cards-container">
      {% for post in posts|slice:":4" %}
         <div class="card">
            <div class="card-image">
               {% if post.mainImage %}
                  <img src="{{ post.mainImage }}" alt="{{ post.name }}">
               {% else %}
                  <div style="width: 100%; height: 100%; background-color: #3949ab; display: flex; align-items: center; justify-content: center; color: white;">
                     <svg width="50" height="50" viewBox="0 0 24 24" fill="white">
                        <path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"/>
                     </svg>
                  </div>
               {% endif %}
               <div class="card-content">
                  <div class="card-author">{{ post.author.username }}</div>
                  <h3 class="card-title">{{ post.name }}</h3>
                  <p class="card-subtitle">{{ post.content|truncatewords:5 }}</p>
                  <div class="card-meta">
                     {% if post.tags|length > 0 %}
                        <span class="card-tag">{{ post.tags.0.name }}</span>
                     {% else %}
                        <span class="card-tag">NEW</span>
                     {% endif %}
                     <span class="card-time">5 MIN READ</span>
                  </div>
               </div>
               <div class="card-actions">
                  <a href="{% url 'post' post.id %}">
                     <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                     </svg>
                  </a>
               </div>
            </div>
         </div>
      {% endfor %}
   </div>
   
   <!-- Недавние посты -->
   <h2 class="section-title">New posts</h2>
   <div class="recent-posts">
      {% for post in posts %}
         <div class="recent-post">
            <div class="recent-post-image">
               {% if post.mainImage %}
                  <img src="{{ post.mainImage }}" alt="{{ post.name }}">
               {% else %}
                  <div style="width: 100%; height: 100%; background-color: #3949ab; display: flex; align-items: center; justify-content: center; color: white;">
                     <svg width="50" height="50" viewBox="0 0 24 24" fill="white">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                     </svg>
                  </div>
               {% endif %}
            </div>
            <div class="recent-post-content">
               <div class="recent-post-author">
                  <div class="author-avatar">
                     <div style="width: 100%; height: 100%; background-color: #5c6af2; display: flex; align-items: center; justify-content: center; color: white; font-size: 12px;">
                        {{ post.author.username|slice:":2"|upper }}
                     </div>
                  </div>
                  <span class="author-name">{{ post.author.username }}</span>
               </div>
               <h3 class="recent-post-title">
                  <a href="{% url 'post' post.id %}">{{ post.name }}</a>
               </h3>
               <p class="recent-post-excerpt">{{ post.content|truncatewords:30 }}</p>
               <div class="recent-post-footer">
                  <div class="recent-post-tags">
                     {% for tag in post.tags %}
                        <div class="recent-post-tag">{{ tag.name }}</div>
                     {% endfor %}
                  </div>
                  <div class="recent-post-meta">
                     <div class="meta-item">
                        <svg class="meta-icon" viewBox="0 0 24 24" fill="#888">
                           <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                        </svg>
                        <span>{{ post.views|default:"0" }}</span>
                     </div>
                     <div class="meta-item">
                        <svg class="meta-icon" viewBox="0 0 24 24" fill="#888">
                           <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                        </svg>
                        <span>{{ post.likes|default:"0" }}</span>
                     </div>
                     <div class="meta-item">
                        <svg class="meta-icon" viewBox="0 0 24 24" fill="#888">
                           <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                        <span>{{ post.createAt|date:"j F, Y" }}</span>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      {% empty %}
         <h1>No posts available</h1>
      {% endfor %}
   </div>
{% endblock body %}